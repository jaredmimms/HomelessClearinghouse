{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/thread-loader/dist/cjs.js!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue","mtime":1620753968946},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHsgYXhpb3MgfSBmcm9tICJAL2NvbW1vbi9hcHAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IHsKICAgICAgICBlbWFpbDogImppbGxAaGFydmFyZC5lZHUiLAogICAgICAgIHBhc3N3b3JkOiAiYXNkZmFzZGYiCiAgICAgIH0sCiAgICAgIHJlZ2lzdGVyRGF0YTogewogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgbmFtZTogIiIKICAgICAgfSwKICAgICAgcmVnaXN0ZXJUb2dnbGU6IGZhbHNlLAogICAgICBlcnJvcnM6IG51bGwsCiAgICAgIGZhdm9yaXRlczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgICB9LAogICAgcG9zdHM6IGZ1bmN0aW9uIHBvc3RzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucG9zdHM7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkRmF2b3JpdGVzOiBmdW5jdGlvbiBsb2FkRmF2b3JpdGVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgIGF4aW9zLmdldCgiZmF2b3JpdGUvcXVlcnk/dXNlcl9pZD0iICsgdGhpcy51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMuZmF2b3JpdGVzID0gcmVzcG9uc2UuZGF0YS5mYXZvcml0ZS5tYXAoZnVuY3Rpb24gKGZhdm9yaXRlKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQb3N0QnlJZChmYXZvcml0ZS5wb3N0X2lkKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoImxvZ2luIiwgdGhpcy5kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmF1dGhlbnRpY2F0ZWQpIHsKICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCJzZXRVc2VyIiwgcmVzcG9uc2UuZGF0YS51c2VyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLmVycm9ycyA9IHJlc3BvbnNlLmRhdGEuZXJyb3JzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoInJlZ2lzdGVyIiwgdGhpcy5yZWdpc3RlckRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMzLiRzdG9yZS5jb21taXQoInNldFVzZXIiLCByZXNwb25zZS5kYXRhLnVzZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuZXJyb3JzID0gcmVzcG9uc2UuZGF0YS5lcnJvcnM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBheGlvcy5wb3N0KCJsb2dvdXQiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM0LiRzdG9yZS5jb21taXQoInNldFVzZXIiLCBudWxsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoKSB7CiAgICAgIHRoaXMubG9hZEZhdm9yaXRlcygpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZEZhdm9yaXRlcygpOwogIH0KfTs="},{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue"],"names":[],"mappings":";AAuFA,SAAS,KAAT,QAAsB,iBAAtB;AACA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,KAAK,EAAE,kBADH;AAEJ,QAAA,QAAQ,EAAE;AAFN,OADD;AAKL,MAAA,YAAY,EAAE;AACZ,QAAA,KAAK,EAAE,EADK;AAEZ,QAAA,QAAQ,EAAE,EAFE;AAGZ,QAAA,IAAI,EAAE;AAHM,OALT;AAUL,MAAA,cAAc,EAAE,KAVX;AAWL,MAAA,MAAM,EAAE,IAXH;AAYL,MAAA,SAAS,EAAE;AAZN,KAAP;AAcD,GAhBY;AAiBb,EAAA,QAAQ,EAAE;AACR,IAAA,IADQ,kBACD;AACL,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAzB;AACD,KAHO;AAIR,IAAA,KAJQ,mBAIA;AACN,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAzB;AACD;AANO,GAjBG;AAyBb,EAAA,OAAO,EAAE;AACP,IAAA,aADO,2BACS;AAAA;;AACd,UAAI,KAAK,IAAT,EAAe;AACb,QAAA,KAAK,CAAC,GAAN,CAAU,4BAA4B,KAAK,IAAL,CAAU,EAAhD,EAAoD,IAApD,CAAyD,UAAC,QAAD,EAAc;AACrE,UAAA,KAAI,CAAC,SAAL,GAAiB,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAuB,GAAvB,CAA2B,UAAC,QAAD,EAAc;AACxD,mBAAO,KAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,WAApB,CAAgC,QAAQ,CAAC,OAAzC,CAAP;AACD,WAFgB,CAAjB;AAGD,SAJD;AAKF;AACD,KATM;AAUP,IAAA,KAVO,mBAUC;AAAA;;AACN,MAAA,KAAK,CAAC,IAAN,CAAW,OAAX,EAAoB,KAAK,IAAzB,EAA+B,IAA/B,CAAoC,UAAC,QAAD,EAAc;AAChD,YAAI,QAAQ,CAAC,IAAT,CAAc,aAAlB,EAAiC;AAC/B,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,QAAQ,CAAC,IAAT,CAAc,IAA5C;AACF,SAFA,MAEO;AACL,UAAA,MAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,MAA5B;AACF;AACD,OAND;AAOD,KAlBM;AAmBP,IAAA,QAnBO,sBAmBI;AAAA;;AACT,MAAA,KAAK,CAAC,IAAN,CAAW,UAAX,EAAuB,KAAK,YAA5B,EAA0C,IAA1C,CAA+C,UAAC,QAAD,EAAc;AAC3D,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAlB,EAA2B;AACzB,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,QAAQ,CAAC,IAAT,CAAc,IAA5C;AACF,SAFA,MAEO;AACL,UAAA,MAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,MAA5B;AACF;AACD,OAND;AAOD,KA3BM;AA4BP,IAAA,MA5BO,oBA4BE;AAAA;;AACP,MAAA,KAAK,CAAC,IAAN,CAAW,QAAX,EAAqB,IAArB,CAA0B,UAAC,QAAD,EAAc;AACtC,YAAI,QAAO,IAAK,QAAQ,CAAC,IAArB,IAA6B,QAAQ,CAAC,IAAT,CAAc,OAA/C,EAAwD;AACtD,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;AACF;AACD,OAJD;AAKD;AAlCM,GAzBI;AA6Db,EAAA,KAAK,EAAE;AACL,IAAA,IADK,kBACE;AACL,WAAK,aAAL;AACD;AAHI,GA7DM;AAkEb,EAAA,OAlEa,qBAkEH;AACR,SAAK,aAAL;AACD;AApEY,CAAf","sourcesContent":["<template>\n  <div id=\"account-page\">\n    <div v-if=\"user && user.name\">\n      <h2>Hi, {{ user.name }}!</h2>\n\n      <div id=\"favorites\">\n        <strong>Your Favorites</strong>\n        <div v-if=\"favorites && favorites.length == 0\">\n          <p>No favorites yet.</p>\n        </div>\n        <div v-else>\n          <li v-for=\"(favorite, key) in favorites\" v-bind:key=\"key\">\n            {{ favorite.title }}\n          </li>\n        </div>\n      </div>\n\n      <button v-on:click=\"logout\">Logout</button>\n    </div>\n\n    <div v-else id=\"loginForm\">\n      <div v-if=\"!registerToggle\">\n        <h2>Login</h2>\n        <div>\n          <label>\n            Email:\n            <input type=\"text\" v-model=\"data.email\" />\n          </label>\n        </div>\n        <div>\n          <label>\n            Password:\n            <input type=\"password\" v-model=\"data.password\" />\n          </label>\n        </div>\n\n        <button v-on:click=\"login\">Login</button>\n\n        <ul v-if=\"errors\">\n          <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n            {{ error }}\n          </li>\n        </ul>\n      </div>\n\n      <div v-if=\"registerToggle\">\n        <h2>Register</h2>\n        <div>\n          <label>\n            Email:\n            <input type=\"text\" v-model=\"registerData.email\" />\n          </label>\n        </div>\n        <div>\n          <label>\n            Name:\n            <input type=\"text\" v-model=\"registerData.name\" />\n          </label>\n        </div>\n        <div>\n          <label>\n            Password:\n            <input type=\"password\" v-model=\"registerData.password\" />\n          </label>\n        </div>\n\n        <ul v-if=\"errors\">\n          <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n            {{ error }}\n          </li>\n        </ul>\n      </div>\n\n      <div v-if=\"!registerToggle\">\n        <button v-on:click=\"registerToggle = true\">Register</button>\n      </div>\n      <div v-if=\"registerToggle\">\n        <button v-on:click=\"register\">Register</button>\n      </div>\n      <div v-if=\"registerToggle\">\n        <button v-on:click=\"registerToggle = false\">Login</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\nexport default {\n  data() {\n    return {\n      data: {\n        email: \"jill@harvard.edu\",\n        password: \"asdfasdf\",\n      },\n      registerData: {\n        email: \"\",\n        password: \"\",\n        name: \"\",\n      },\n      registerToggle: false,\n      errors: null,\n      favorites: [],\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    posts() {\n      return this.$store.state.posts;\n    },\n  },\n  methods: {\n    loadFavorites() {\n      if (this.user) {\n        axios.get(\"favorite/query?user_id=\" + this.user.id).then((response) => {\n          this.favorites = response.data.favorite.map((favorite) => {\n            return this.$store.getters.getPostById(favorite.post_id);\n          });\n        });\n      }\n    },\n    login() {\n      axios.post(\"login\", this.data).then((response) => {\n        if (response.data.authenticated) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n      });\n    },\n    register() {\n      axios.post(\"register\", this.registerData).then((response) => {\n        if (response.data.success) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n      });\n    },\n    logout() {\n      axios.post(\"logout\").then((response) => {\n        if (response && response.data && response.data.success) {\n          this.$store.commit(\"setUser\", null);\n        }\n      });\n    },\n  },\n  watch: {\n    user() {\n      this.loadFavorites();\n    },\n  },\n  mounted() {\n    this.loadFavorites();\n  },\n};\n</script>"],"sourceRoot":""}]}