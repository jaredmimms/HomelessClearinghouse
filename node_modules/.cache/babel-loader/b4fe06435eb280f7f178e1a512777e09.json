{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue","mtime":1620691086744},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHsgYXhpb3MgfSBmcm9tICJAL2NvbW1vbi9hcHAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IHsKICAgICAgICBlbWFpbDogImppbGxAaGFydmFyZC5lZHUiLAogICAgICAgIHBhc3N3b3JkOiAiYXNkZmFzZGYiCiAgICAgIH0sCiAgICAgIGVycm9yczogbnVsbCwKICAgICAgZmF2b3JpdGVzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlcjsKICAgIH0sCiAgICBwb3N0czogZnVuY3Rpb24gcG9zdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wb3N0czsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRGYXZvcml0ZXM6IGZ1bmN0aW9uIGxvYWRGYXZvcml0ZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgYXhpb3MuZ2V0KCJmYXZvcml0ZS9xdWVyeT91c2VyX2lkPSIgKyB0aGlzLnVzZXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy5mYXZvcml0ZXMgPSByZXNwb25zZS5kYXRhLmZhdm9yaXRlLm1hcChmdW5jdGlvbiAoZmF2b3JpdGUpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBvc3RCeUlkKGZhdm9yaXRlLnBvc3RfaWQpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MucG9zdCgibG9naW4iLCB0aGlzLmRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYXV0aGVudGljYXRlZCkgewogICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoInNldFVzZXIiLCByZXNwb25zZS5kYXRhLnVzZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuZXJyb3JzID0gcmVzcG9uc2UuZGF0YS5lcnJvcnM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBheGlvcy5wb3N0KCJsb2dvdXQiLCB0aGlzLmRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczMuJHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIG51bGwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgdGhpcy5sb2FkRmF2b3JpdGVzKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkRmF2b3JpdGVzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/e28/p3/src/components/pages/AccountPage.vue"],"names":[],"mappings":";AA+CA,SAAS,KAAT,QAAsB,iBAAtB;AACA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,KAAK,EAAE,kBADH;AAEJ,QAAA,QAAQ,EAAE;AAFN,OADD;AAKL,MAAA,MAAM,EAAE,IALH;AAML,MAAA,SAAS,EAAE;AANN,KAAP;AAQD,GAVY;AAWb,EAAA,QAAQ,EAAE;AACR,IAAA,IADQ,kBACD;AACL,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAzB;AACD,KAHO;AAIR,IAAA,KAJQ,mBAIA;AACN,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAzB;AACD;AANO,GAXG;AAmBb,EAAA,OAAO,EAAE;AACP,IAAA,aADO,2BACS;AAAA;;AACd,UAAI,KAAK,IAAT,EAAe;AACb,QAAA,KAAK,CAAC,GAAN,CAAU,4BAA4B,KAAK,IAAL,CAAU,EAAhD,EAAoD,IAApD,CAAyD,UAAC,QAAD,EAAc;AACrE,UAAA,KAAI,CAAC,SAAL,GAAiB,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAuB,GAAvB,CAA2B,UAAC,QAAD,EAAc;AACxD,mBAAO,KAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,WAApB,CAAgC,QAAQ,CAAC,OAAzC,CAAP;AACD,WAFgB,CAAjB;AAGD,SAJD;AAKF;AACD,KATM;AAUP,IAAA,KAVO,mBAUC;AAAA;;AACN,MAAA,KAAK,CAAC,IAAN,CAAW,OAAX,EAAoB,KAAK,IAAzB,EAA+B,IAA/B,CAAoC,UAAC,QAAD,EAAc;AAChD,YAAI,QAAQ,CAAC,IAAT,CAAc,aAAlB,EAAiC;AAC/B,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,QAAQ,CAAC,IAAT,CAAc,IAA5C;AACF,SAFA,MAEO;AACL,UAAA,MAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,MAA5B;AACF;AACD,OAND;AAOD,KAlBM;AAmBP,IAAA,MAnBO,oBAmBE;AAAA;;AACP,MAAA,KAAK,CAAC,IAAN,CAAW,QAAX,EAAqB,KAAK,IAA1B,EAAgC,IAAhC,CAAqC,UAAC,QAAD,EAAc;AACjD,YAAI,QAAO,IAAK,QAAQ,CAAC,IAArB,IAA6B,QAAQ,CAAC,IAAT,CAAc,OAA/C,EAAwD;AACtD,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;AACF;AACD,OAJD;AAKD;AAzBM,GAnBI;AA8Cb,EAAA,KAAK,EAAE;AACL,IAAA,IADK,kBACE;AACL,WAAK,aAAL;AACD;AAHI,GA9CM;AAmDb,EAAA,OAnDa,qBAmDH;AACR,SAAK,aAAL;AACD;AArDY,CAAf","sourcesContent":["<template>\n  <div id=\"account-page\">\n    <div v-if=\"user && user.name\">\n      <h2>Hi, {{ user.name }}!</h2>\n\n      <div id=\"favorites\">\n        <strong>Your Favorites</strong>\n        <div v-if=\"favorites && favorites.length == 0\">\n          <p>No favorites yet.</p>\n        </div>\n        <div v-else>\n          <li v-for=\"(favorite, key) in favorites\" v-bind:key=\"key\">\n            {{ favorite.title }}\n          </li>\n        </div>\n      </div>\n\n      <button v-on:click=\"logout\">Logout</button>\n    </div>\n\n    <div v-else id=\"loginForm\">\n      <h2>Login</h2>\n      <div>\n        <label>\n          Email:\n          <input type=\"text\" v-model=\"data.email\" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type=\"password\" v-model=\"data.password\" />\n        </label>\n      </div>\n\n      <button v-on:click=\"login\">Login</button>\n\n      <ul v-if=\"errors\">\n        <li class=\"error\" v-for=\"(error, index) in errors\" :key=\"index\">\n          {{ error }}\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\nexport default {\n  data() {\n    return {\n      data: {\n        email: \"jill@harvard.edu\",\n        password: \"asdfasdf\",\n      },\n      errors: null,\n      favorites: [],\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    posts() {\n      return this.$store.state.posts;\n    },\n  },\n  methods: {\n    loadFavorites() {\n      if (this.user) {\n        axios.get(\"favorite/query?user_id=\" + this.user.id).then((response) => {\n          this.favorites = response.data.favorite.map((favorite) => {\n            return this.$store.getters.getPostById(favorite.post_id);\n          });\n        });\n      }\n    },\n    login() {\n      axios.post(\"login\", this.data).then((response) => {\n        if (response.data.authenticated) {\n          this.$store.commit(\"setUser\", response.data.user);\n        } else {\n          this.errors = response.data.errors;\n        }\n      });\n    },\n    logout() {\n      axios.post(\"logout\", this.data).then((response) => {\n        if (response && response.data && response.data.success) {\n          this.$store.commit(\"setUser\", null);\n        }\n      });\n    },\n  },\n  watch: {\n    user() {\n      this.loadFavorites();\n    },\n  },\n  mounted() {\n    this.loadFavorites();\n  },\n};\n</script>"],"sourceRoot":""}]}